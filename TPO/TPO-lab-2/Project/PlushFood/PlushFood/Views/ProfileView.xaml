<Window x:Class="PlushFood.Views.ProfileView"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:PlushFood.Views"
        mc:Ignorable="d"
        Title="ProfileView" Height="600" Width="1000"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None" AllowsTransparency="True" Background="Transparent">
    <Grid>
        <Grid.Effect>
            <DropShadowEffect BlurRadius="30" ShadowDepth="1" Opacity="0.4"/>
        </Grid.Effect>
        <Border Background="{DynamicResource MainBrush}" CornerRadius="10" BorderBrush="Transparent">
            <Grid>
                <!-- Верхняя строка с кнопками -->
                <Grid Margin="10" VerticalAlignment="Top" Height="50" Background="{DynamicResource MainBrush}">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition/>
                        <ColumnDefinition Width="Auto" MinWidth="752"/>
                    </Grid.ColumnDefinitions>

                    <!-- Кнопка Выйти -->
                    <Button Content="Выйти" Width="100" Height="40" 
                            HorizontalAlignment="Center" VerticalAlignment="Center"
                            BorderBrush="Transparent" FontSize="16"
                            Command="{Binding LogoutCommand}"
                            Background="Transparent" Foreground="{DynamicResource SecondaryBrush}"/>

                    <!-- Кнопка Каталог -->
                    <Button Content="Каталог" Width="100" Grid.Column="1" 
                            BorderBrush="Transparent" FontSize="16"
                            Background="Transparent" Foreground="{DynamicResource SecondaryBrush}"
                            HorizontalAlignment="Center" Margin="0,5,0,5"
                            Command="{Binding NavigateToCatalogCommand}"/>

                    <Button Content="◑" FontSize="28" Command="{Binding SwitchThemeCommand}"
                            HorizontalAlignment="Left" Width="40" Margin="645,0,0,0"
                            Background="Transparent" BorderBrush="Transparent"
                            BorderThickness="0" Height="40" VerticalAlignment="Center"
                            Foreground="{DynamicResource SecondaryBrush}" Grid.Column="2"/>
                </Grid>

                <!-- Основная область -->
                <Grid Margin="10,60,10,10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="1*"/>
                        <ColumnDefinition Width="1*"/>
                    </Grid.ColumnDefinitions>

                    <!-- Левая часть -->
                    <Border Grid.Column="0" Background="{DynamicResource PrimaryBrush}" CornerRadius="10" Margin="5">
                        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Margin="20">
                            <!-- Заголовок -->
                            <TextBlock FontWeight="Light" FontSize="28" 
                                       Foreground="{DynamicResource SecondaryBrush}" 
                                       TextAlignment="Center" Text="Редактирование профиля"/>

                            <!-- Имя -->
                            <StackPanel Orientation="Horizontal" Margin="6">
                                <TextBlock Text="Имя" FontSize="14" Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center" Width="120"/>
                                <Border Background="#cae412" Width="280" CornerRadius="5" Height="30" Opacity="0.7">
                                    <TextBox Text="{Binding CurrentClient.FirstName, UpdateSourceTrigger=PropertyChanged}" 
                                             Background="Transparent" BorderThickness="0" Width="260"
                                             Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center"/>
                                </Border>
                            </StackPanel>

                            <!-- Фамилия -->
                            <StackPanel Orientation="Horizontal" Margin="6">
                                <TextBlock Text="Фамилия" FontSize="14" Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center" Width="120"/>
                                <Border Background="#cae412" Width="280" CornerRadius="5" Height="30" Opacity="0.7">
                                    <TextBox Text="{Binding CurrentClient.LastName, UpdateSourceTrigger=PropertyChanged}" 
                                             Background="Transparent" BorderThickness="0" Width="260"
                                             Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center"/>
                                </Border>
                            </StackPanel>

                            <!-- Логин -->
                            <StackPanel Orientation="Horizontal" Margin="6">
                                <TextBlock Text="Логин" FontSize="14" Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center" Width="120"/>
                                <Border Background="#cae412" Width="280" CornerRadius="5" Height="30" Opacity="0.7">
                                    <TextBox Text="{Binding CurrentClient.UserName, UpdateSourceTrigger=PropertyChanged}" 
                                             Background="Transparent" BorderThickness="0" Width="260"
                                             Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center"/>
                                </Border>
                            </StackPanel>

                            <!-- Email -->
                            <StackPanel Orientation="Horizontal" Margin="6">
                                <TextBlock Text="Email" FontSize="14" Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center" Width="120"/>
                                <Border Background="#cae412" Width="280" CornerRadius="5" Height="30" Opacity="0.7">
                                    <TextBox Text="{Binding CurrentClient.Email, UpdateSourceTrigger=PropertyChanged}" 
                                             Background="Transparent" BorderThickness="0" Width="260"
                                             Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center"/>
                                </Border>
                            </StackPanel>

                            <!-- Телефон -->
                            <StackPanel Orientation="Horizontal" Margin="6">
                                <TextBlock Text="Телефон" FontSize="14" Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center" Width="120"/>
                                <Border Background="#cae412" Width="280" CornerRadius="5" Height="30" Opacity="0.7">
                                    <TextBox Text="{Binding CurrentClient.PhoneNumber, UpdateSourceTrigger=PropertyChanged}" 
                                             Background="Transparent" BorderThickness="0" Width="260"
                                             Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center"/>
                                </Border>
                            </StackPanel>

                            <!-- Адрес -->
                            <StackPanel Orientation="Horizontal" Margin="6">
                                <TextBlock Text="Адрес" FontSize="14" Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center" Width="120"/>
                                <Border Background="#cae412" Width="280" CornerRadius="5" Height="30" Opacity="0.7">
                                    <TextBox Text="{Binding CurrentClient.Address, UpdateSourceTrigger=PropertyChanged}" 
                                             Background="Transparent" BorderThickness="0" Width="260"
                                             Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center"/>
                                </Border>
                            </StackPanel>

                            <!-- Текущий пароль -->
                            <StackPanel Orientation="Horizontal" Margin="6">
                                <TextBlock Text="Текущий пароль" FontSize="14" Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center" Width="120"/>
                                <Border Background="#cae412" Width="280" CornerRadius="5" Height="30" Opacity="0.7">
                                    <PasswordBox x:Name="OldPasswordBox" Background="Transparent" BorderThickness="0" Width="260"
                                                 Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center"
                                                 PasswordChanged="OldPasswordBox_PasswordChanged"/>
                                </Border>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="6">
                                <TextBlock Text="Новый пароль" FontSize="14" Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center" Width="120"/>
                                <Border Background="#cae412" Width="280" CornerRadius="5" Height="30" Opacity="0.7">
                                    <PasswordBox x:Name="NewPasswordBox" Background="Transparent" BorderThickness="0" Width="260"
                                                 Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center"
                                                 PasswordChanged="NewPasswordBox_PasswordChanged"/>
                                </Border>
                            </StackPanel>

                            <StackPanel Orientation="Horizontal" Margin="6">
                                <TextBlock Text="Подтверждение" FontSize="14" Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center" Width="120"/>
                                <Border Background="#cae412" Width="280" CornerRadius="5" Height="30" Opacity="0.7">
                                    <PasswordBox x:Name="ConfirmPasswordBox" Background="Transparent" BorderThickness="0" Width="260"
                                                 Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center"
                                                 PasswordChanged="ConfirmPasswordBox_PasswordChanged"/>
                                </Border>
                            </StackPanel>



                            <!-- Кнопка Сохранить -->
                            <Border VerticalAlignment="Top" Margin="100,0,100,0" Background="#3d4405" Height="40" CornerRadius="10">
                                <Button Content="Сохранить изменения" 
                                        Background="Transparent" 
                                        Margin="5" Foreground="white" 
                                        FontSize="20" BorderThickness="0" 
                                        Command="{Binding SaveProfileCommand}"/>
                            </Border>
                        </StackPanel>
                    </Border>

                    <!-- Правая часть -->
                    <Border Grid.Column="1" Background="{DynamicResource PrimaryBrush}" CornerRadius="10" Margin="5">
                        <StackPanel VerticalAlignment="Top" HorizontalAlignment="Stretch" Margin="10">

                            <!-- Заголовок Заказы -->
                            <TextBlock FontWeight="Light" FontSize="16" Foreground="{DynamicResource SecondaryBrush}" 
                                       TextAlignment="Center" Text="Заказы" Margin="0,0,0,10"/>

                            <!-- DataGrid для заказов -->
                            <DataGrid ItemsSource="{Binding Orders}"
                                      SelectedItem="{Binding SelectedOrder, Mode=TwoWay}"
                                      AutoGenerateColumns="False" MaxHeight="90" 
                                      HorizontalAlignment="Stretch"      IsReadOnly="True">
                                <DataGrid.Resources>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="Foreground" Value="{DynamicResource SecondaryBrush}" />
                                        <Setter Property="Background" Value="{DynamicResource ThirdBrush}" />
                                        <Setter Property="HorizontalContentAlignment" Value="Center" />
                                    </Style>
                                </DataGrid.Resources>
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="ID заказа" Binding="{Binding OrderID}" Width="*" />
                                    <DataGridTextColumn Header="Дата заказа" Binding="{Binding OrderDate}" Width="*" />
                                    <DataGridTextColumn Header="Сумма" Binding="{Binding TotalAmount}" Width="*" />
                                    <DataGridTextColumn Header="Статус" Binding="{Binding Status}" Width="*" />
                                </DataGrid.Columns>
                            </DataGrid>
    


                            <!-- Заголовок Содержимое заказа -->
                            <TextBlock FontWeight="Light" FontSize="16" Foreground="{DynamicResource SecondaryBrush}" 
                                       TextAlignment="Center" Text="Содержимое заказа" Margin="0,20,0,10"/>

                            <!-- DataGrid для содержимого выбранного заказа -->
                            <DataGrid ItemsSource="{Binding SelectedOrderDetails}"
                                      AutoGenerateColumns="False" 
                                      MaxHeight="90" HorizontalAlignment="Stretch"      IsReadOnly="True">
                                <DataGrid.Resources>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="Foreground" Value="{DynamicResource SecondaryBrush}" />
                                        <Setter Property="Background" Value="{DynamicResource ThirdBrush}" />
                                        <Setter Property="HorizontalContentAlignment" Value="Center" />
                                    </Style>
                                </DataGrid.Resources>
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="Блюдо" Binding="{Binding Meal.Name}" Width="*" />
                                    <DataGridTextColumn Header="Количество" Binding="{Binding Quantity}" Width="*" />
                                    <DataGridTextColumn Header="Цена" Binding="{Binding Price}" Width="*" />
                                    <DataGridTextColumn Header="Сумма" Binding="{Binding TotalPrice}" Width="*" />
                                </DataGrid.Columns>
                            </DataGrid>


                            <!-- Причина для возврата -->
                            <StackPanel Orientation="Horizontal" Margin="6">
                                <TextBlock Text="Причина" FontSize="14" Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center" Width="120"/>
                                <Border Background="#cae412" Width="320" CornerRadius="5" Height="30" Opacity="0.7">
                                    <TextBox x:Name="ReturnReason"
                                             Background="Transparent" 
                                             BorderThickness="0" Width="300"
                                             Text="{Binding ReturnReason}"
                                             Foreground="{DynamicResource SecondaryBrush}" VerticalAlignment="Center"/>
                                </Border>
                            </StackPanel>

                            <!-- Кнопка Оформить возврат -->
                            <Border VerticalAlignment="Top" Margin="150,10,150,0" Background="#3d4405" Height="30" CornerRadius="10">
                                <Button Content="Оформить возврат" Background="Transparent" Margin="5" Foreground="white" 
                                        FontSize="14" BorderThickness="0" Command="{Binding ProcessReturnCommand}"/>
                            </Border>

                            <!-- Заголовок Возвраты -->
                            <TextBlock FontWeight="Light" FontSize="16" Foreground="{DynamicResource SecondaryBrush}" 
                                       TextAlignment="Center" Text="Возвраты" Margin="0,20,0,10"/>

                            <!-- DataGrid для возвратов -->
                            <DataGrid ItemsSource="{Binding Returns}" AutoGenerateColumns="False" MaxHeight="90" 
                                      HorizontalAlignment="Stretch" 
                                      Margin="0,0,0,10"      IsReadOnly="True">
                                <DataGrid.Resources>
                                    <Style TargetType="DataGridColumnHeader">
                                        <Setter Property="Foreground" Value="{DynamicResource SecondaryBrush}" />
                                        <Setter Property="Background" Value="{DynamicResource ThirdBrush}" />
                                        <Setter Property="HorizontalContentAlignment" Value="Center" />
                                    </Style>
                                </DataGrid.Resources>
                                <DataGrid.Columns>
                                    <DataGridTextColumn Header="ID возврата" Binding="{Binding ReturnID}" Width="*" />
                                    <DataGridTextColumn Header="ID заказа" Binding="{Binding OrderID}" Width="*" />
                                    <DataGridTextColumn Header="Причина" Binding="{Binding Reason}" Width="*" />
                                    <DataGridTextColumn Header="Дата возврата" Binding="{Binding ReturnDate}" Width="*" />
                                    <DataGridTextColumn Header="Статус" Binding="{Binding Status}" Width="*" />
                                </DataGrid.Columns>
                            </DataGrid>

                        </StackPanel>
                    </Border>
                </Grid>
            </Grid>
        </Border>
    </Grid>
</Window>
